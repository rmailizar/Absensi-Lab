<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scan QR Code Kamu Disini</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"    
  />
  <link rel="stylesheet" href="assets/css/scanner.css">
</head>
<body>
  <div class="text-center">
    <h2>Scan Kode QR Kamu Disini</h2>
    <p>Arahkan kamera ke QR Code kamu</p>

    <div id="camera-container">
      <video id="preview" autoplay playsinline></video>
      <div class="scanner-line"></div>
      <div id="overlay-message" class="overlay-text text-light"></div>
    </div>
  </div>

  <script>
    const video = document.getElementById("preview");
    const overlay = document.getElementById("overlay-message");
    const body = document.body;

    // Minta izin kamera
    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = stream;
      } catch (err) {
        console.error("Akses kamera ditolak:", err);
        overlay.textContent = "Izin kamera dibutuhkan!";
        overlay.classList.add("show");
      }
    }

    startCamera();

    // Simulasi hasil scan (sementara)
    function simulateScan(success = true) {
      if (success) {
        body.classList.add("scan-success");
        overlay.textContent = " Scan Berhasil! Selamat datang, Bejokowi! ✅";
      } else {
        body.classList.add("scan-fail");
        overlay.textContent = " Scan gagal, coba ulangi. ❌";
      }
      overlay.classList.add("show");

      setTimeout(() => {
        overlay.classList.remove("show");
        body.classList.remove("scan-success", "scan-fail");
      }, 2000);
    }

    // Simulasi sementara (bisa diganti dengan deteksi QR nyata)
    setTimeout(() => simulateScan(true), 4000);
    setTimeout(() => simulateScan(false), 9000);
  </script>
</body>
</html>
